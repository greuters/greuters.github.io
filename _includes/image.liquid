{%- comment -%}

Usage:

Add your image in front matter according to specification in load-images.liquid

Include it into your page / post with:

{% include image.liquid id="dirname/filename" %}

TODO: automatically minify images https://jimmyxiao.me/guides/technical/2019/07/28/folder-based-jekyll-lightgallery
TODO: allow basic styling

{%- endcomment -%}

{% include load-images.liquid page_path=page.path %}

{% assign image = page_images | where_exp: "image", "image[img_id] == include.id" | first %}

{% if image == nil %}
  <img src="" alt="{{'Imagefile with id=`' | append: include.id | append: '` is missing!' | raise_error }}">
{% else %}
  <figure>
    <img src="{{image[img_path]}}" alt="{{image[img_alt]}}">
    <figcaption>{{ image[img_caption] }}</figcaption>
  </figure>
{% endif %}